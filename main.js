!function(){"use strict";class e{constructor(e,t,s){this._name=e.name,this._link=e.link,this._cardTemplate=t,this._handleImagePreviewClick=s}_setEventListeners(){this._cardImage.addEventListener("click",(()=>{this._handleImagePreviewClick({link:this._link,name:this._name})})),this._deleteButton.addEventListener("click",(()=>{this._handleDeleteCard()})),this._likeButton.addEventListener("click",(()=>{this._handleLikeButton()}))}_handleDeleteCard(){this._cardElement.remove(),this._cardElement=null}_handleLikeButton(){this._likeButton.classList.toggle("card__like-button_active")}getTemplate(){return document.querySelector(this._cardTemplate).content.querySelector(".card").cloneNode(!0)}getView(){return this._cardElement=this.getTemplate(),this._likeButton=this._cardElement.querySelector(".card__like-button"),this._cardImage=this._cardElement.querySelector(".card__image"),this._deleteButton=this._cardElement.querySelector(".card__delete-button"),this._cardTitle=this._cardElement.querySelector(".card__title"),this._cardImage.src=this._link,this._cardImage.alt=this._name,this._cardTitle.textContent=this._name,this._setEventListeners(),this._cardElement}}var t=class{constructor(e,t){this._formSelector=e.formSelector,this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._formEl=t}_showInputError(e){const t=this._formEl.querySelector(`#${e.id}-error`);e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass)}_hideInputError(e){const t=this._formEl.querySelector(`#${e.id}-error`);e.classList.remove(this._inputErrorClass),t.textContent="",t.classList.remove(this._errorClass)}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}_toggleButton(){let e=!1;this._inputEls.forEach((t=>{t.validity.valid||(e=!0)})),e?this.disableSubmitButton():(this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1)}disableSubmitButton(){this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0}_setEventListeners(){this._inputEls=[...this._formEl.querySelectorAll(this._inputSelector)],this._submitButton=this._formEl.querySelector(this._submitButtonSelector),this._inputEls.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._toggleButton(this._inputEls,this._submitButton)}))}))}enableValidation(){this._formEl.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}};class s{constructor(e){let{popupSelector:t}=e;this._popupElement=document.querySelector(t),this._handleEscClose=this._handleEscClose.bind(this)}open(){this._popupElement.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscClose)}close(){this._popupElement.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscClose)}_handleEscClose(e){"Escape"===e.key&&this.close()}setEventListeners(){this._popupElement.querySelector(".modal__close").addEventListener("click",(()=>{this.close()})),this._popupElement.addEventListener("mousedown",(e=>{(e.target.classList.contains("modal")||e.target.classList.contains("modal_opened"))&&this.close()}))}}class n extends s{constructor(e){let{popupSelector:t,handleFormSubmit:s}=e;super({popupSelector:t}),this._popupForm=this._popupElement.querySelector(".modal__form"),this._inputList=this._popupForm.querySelectorAll(".modal__input"),this._handleFormSubmit=s,this._submitButton=this._popupElement.querySelector(".modal__button")}_getInputValues(){const e={};return this._inputList.forEach((t=>{e[t.name]=t.value})),e}resetForm(){this._popupForm.reset()}setEventListeners(){super.setEventListeners(),this._popupForm.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues())}))}}const i={inputSelector:".modal__input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible"},o=document.querySelector(".profile__add-button"),r=document.querySelector("#name-input"),a=document.querySelector("#description-input"),l=document.querySelector("#edit-profile-form"),c=document.querySelector("#add-card-form"),u=document.querySelector("#profile-edit-button"),m=new class extends s{constructor(e){let{popupSelector:t}=e;super({popupSelector:t}),this._image=this._popupElement.querySelector(".modal__image"),this._caption=this._popupElement.querySelector(".modal__caption")}open(e){let{name:t,link:s}=e;this._image.src=s,this._image.alt=t,this._caption.textContent=t,super.open()}}({popupSelector:"#preview-modal"}),d=new class{constructor(e){let{nameSelector:t,jobSelector:s}=e;this._nameElement=document.querySelector(t),this._jobElement=document.querySelector(s)}getUserInfo(){return{name:this._nameElement.textContent,description:this._jobElement.textContent}}setUserInfo(e){this._nameElement.textContent=e.name,this._jobElement.textContent=e.description}}({nameSelector:"#profile-title",jobSelector:"#profile-description"}),_=new n({popupSelector:"#edit-modal",handleFormSubmit:e=>{d.setUserInfo({name:e.name,description:e.description}),_.close(),_.resetForm(),S.disableSubmitButton()}}),p=new n({popupSelector:"#add-card-modal",handleFormSubmit:e=>{let{name:t,url:s}=e;const n=E({name:t,link:s});h.addItem(n),p.close(),p.resetForm(),v.disableSubmitButton()}}),h=new class{constructor(e,t){let{items:s,renderer:n}=e;this._items=s,this._renderer=n,this._container=document.querySelector(t)}renderItems(){this._items.forEach((e=>{this._renderer(e)}))}addItem(e){this._container.prepend(e)}}({items:[{name:"Yosemite Valley",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/yosemite.jpg"},{name:"Lake Louise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lake-louise.jpg"},{name:"Bald Mountains",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/bald-mountains.jpg"},{name:"Latemar",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/latemar.jpg"},{name:"Vanoise National Park",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/vanoise.jpg"},{name:"Lago di Braies",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lago.jpg"}],renderer:e=>{const t=E(e);h.addItem(t)}},".cards__list");function E(t){return new e(t,"#card-template",(e=>{m.open(e)})).getView()}o.addEventListener("click",(()=>p.open())),_.setEventListeners(),p.setEventListeners(),m.setEventListeners(),u.addEventListener("click",(()=>{const e=d.getUserInfo();r.value=e.name,a.value=e.description,_.open()}));const S=new t(i,l),v=new t(i,c);S.enableValidation(),v.enableValidation(),h.renderItems()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LE1BQU13SCxFQUFrQjVCLEVBQVNLLGNBQ2pDZCxFQUFVTCxNQUFRMEMsRUFBZ0IvSCxLQUNsQzJGLEVBQWlCTixNQUFRMEMsRUFBZ0J0QixZQUN6Q0csRUFBaUJ4QyxNQUFNLElBS3pCLE1BQU15QyxFQUFvQixJQUFJbUIsRUFDNUJ4QyxFQUNBSSxHQUdJd0IsRUFBbUIsSUFBSVksRUFBY3hDLEVBQW9CSyxHQUUvRGdCLEVBQWtCbEQsbUJBQ2xCeUQsRUFBaUJ6RCxtQkFFakJ1RCxFQUFTUyxhIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vQXJvdW5kIHRoZSBVUy8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vQXJvdW5kIHRoZSBVUy8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vQXJvdW5kIHRoZSBVUy8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL0Fyb3VuZCB0aGUgVVMvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL0Fyb3VuZCB0aGUgVVMvLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL0Fyb3VuZCB0aGUgVVMvLi9zcmMvcGFnZS9pbmRleC5qcyIsIndlYnBhY2s6Ly9Bcm91bmQgdGhlIFVTLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vQXJvdW5kIHRoZSBVUy8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL0Fyb3VuZCB0aGUgVVMvLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xuICBjb25zdHJ1Y3RvcihjYXJkRGF0YSwgY2FyZFRlbXBsYXRlLCBoYW5kbGVJbWFnZVByZXZpZXdDbGljaykge1xuICAgIHRoaXMuX25hbWUgPSBjYXJkRGF0YS5uYW1lO1xuICAgIHRoaXMuX2xpbmsgPSBjYXJkRGF0YS5saW5rO1xuICAgIHRoaXMuX2NhcmRUZW1wbGF0ZSA9IGNhcmRUZW1wbGF0ZTtcbiAgICB0aGlzLl9oYW5kbGVJbWFnZVByZXZpZXdDbGljayA9IGhhbmRsZUltYWdlUHJldmlld0NsaWNrO1xuICB9XG5cbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX2NhcmRJbWFnZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgdGhpcy5faGFuZGxlSW1hZ2VQcmV2aWV3Q2xpY2soeyBsaW5rOiB0aGlzLl9saW5rLCBuYW1lOiB0aGlzLl9uYW1lIH0pO1xuICAgIH0pO1xuXG4gICAgdGhpcy5fZGVsZXRlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICB0aGlzLl9oYW5kbGVEZWxldGVDYXJkKCk7XG4gICAgfSk7XG5cbiAgICB0aGlzLl9saWtlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICB0aGlzLl9oYW5kbGVMaWtlQnV0dG9uKCk7XG4gICAgfSk7XG4gIH1cblxuICBfaGFuZGxlRGVsZXRlQ2FyZCgpIHtcbiAgICB0aGlzLl9jYXJkRWxlbWVudC5yZW1vdmUoKTtcbiAgICB0aGlzLl9jYXJkRWxlbWVudCA9IG51bGw7XG4gIH1cblxuICBfaGFuZGxlTGlrZUJ1dHRvbigpIHtcbiAgICB0aGlzLl9saWtlQnV0dG9uLmNsYXNzTGlzdC50b2dnbGUoXCJjYXJkX19saWtlLWJ1dHRvbl9hY3RpdmVcIik7XG4gIH1cblxuICBnZXRUZW1wbGF0ZSgpIHtcbiAgICByZXR1cm4gZG9jdW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NhcmRUZW1wbGF0ZSlcbiAgICAgIC5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZFwiKVxuICAgICAgLmNsb25lTm9kZSh0cnVlKTtcbiAgfVxuXG4gIGdldFZpZXcoKSB7XG4gICAgdGhpcy5fY2FyZEVsZW1lbnQgPSB0aGlzLmdldFRlbXBsYXRlKCk7XG4gICAgdGhpcy5fbGlrZUJ1dHRvbiA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZS1idXR0b25cIik7XG4gICAgdGhpcy5fY2FyZEltYWdlID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKTtcbiAgICB0aGlzLl9kZWxldGVCdXR0b24gPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgXCIuY2FyZF9fZGVsZXRlLWJ1dHRvblwiXG4gICAgKTtcbiAgICB0aGlzLl9jYXJkVGl0bGUgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3RpdGxlXCIpO1xuICAgIHRoaXMuX2NhcmRJbWFnZS5zcmMgPSB0aGlzLl9saW5rO1xuICAgIHRoaXMuX2NhcmRJbWFnZS5hbHQgPSB0aGlzLl9uYW1lO1xuICAgIHRoaXMuX2NhcmRUaXRsZS50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XG5cbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuICAgIHJldHVybiB0aGlzLl9jYXJkRWxlbWVudDtcbiAgfVxufVxuIiwiY2xhc3MgRm9ybVZhbGlkYXRvciB7XG4gIGNvbnN0cnVjdG9yKHNldHRpbmdzLCBmb3JtRWwpIHtcbiAgICB0aGlzLl9mb3JtU2VsZWN0b3IgPSBzZXR0aW5ncy5mb3JtU2VsZWN0b3I7XG4gICAgdGhpcy5faW5wdXRTZWxlY3RvciA9IHNldHRpbmdzLmlucHV0U2VsZWN0b3I7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IgPSBzZXR0aW5ncy5zdWJtaXRCdXR0b25TZWxlY3RvcjtcbiAgICB0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzID0gc2V0dGluZ3MuaW5hY3RpdmVCdXR0b25DbGFzcztcbiAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSBzZXR0aW5ncy5pbnB1dEVycm9yQ2xhc3M7XG4gICAgdGhpcy5fZXJyb3JDbGFzcyA9IHNldHRpbmdzLmVycm9yQ2xhc3M7XG4gICAgdGhpcy5fZm9ybUVsID0gZm9ybUVsO1xuICB9XG5cbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0RWwpIHtcbiAgICBjb25zdCBlcnJvck1zZyA9IHRoaXMuX2Zvcm1FbC5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dEVsLmlkfS1lcnJvcmApO1xuICAgIGlucHV0RWwuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xuICAgIGVycm9yTXNnLnRleHRDb250ZW50ID0gaW5wdXRFbC52YWxpZGF0aW9uTWVzc2FnZTtcbiAgICBlcnJvck1zZy5jbGFzc0xpc3QuYWRkKHRoaXMuX2Vycm9yQ2xhc3MpO1xuICB9XG5cbiAgX2hpZGVJbnB1dEVycm9yKGlucHV0RWwpIHtcbiAgICBjb25zdCBlcnJvck1zZyA9IHRoaXMuX2Zvcm1FbC5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dEVsLmlkfS1lcnJvcmApO1xuICAgIGlucHV0RWwuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xuICAgIGVycm9yTXNnLnRleHRDb250ZW50ID0gXCJcIjtcbiAgICBlcnJvck1zZy5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2Vycm9yQ2xhc3MpO1xuICB9XG5cbiAgX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsKSB7XG4gICAgaWYgKCFpbnB1dEVsLnZhbGlkaXR5LnZhbGlkKSB7XG4gICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbCk7XG4gICAgfVxuICB9XG5cbiAgX3RvZ2dsZUJ1dHRvbigpIHtcbiAgICBsZXQgaW52YWxpZElucHV0ID0gZmFsc2U7XG4gICAgdGhpcy5faW5wdXRFbHMuZm9yRWFjaCgoaW5wdXRFbCkgPT4ge1xuICAgICAgaWYgKCFpbnB1dEVsLnZhbGlkaXR5LnZhbGlkKSB7XG4gICAgICAgIGludmFsaWRJbnB1dCA9IHRydWU7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBpZiAoaW52YWxpZElucHV0KSB7XG5cbiAgICAgIHRoaXMuZGlzYWJsZVN1Ym1pdEJ1dHRvbigpO1xuXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgZGlzYWJsZVN1Ym1pdEJ1dHRvbigpe1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IHRydWU7XG4gIH1cblxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5faW5wdXRFbHMgPSBbLi4udGhpcy5fZm9ybUVsLnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3RvcildO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbiA9IHRoaXMuX2Zvcm1FbC5xdWVyeVNlbGVjdG9yKHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcblxuICAgIHRoaXMuX2lucHV0RWxzLmZvckVhY2goKGlucHV0RWwpID0+IHtcbiAgICAgIGlucHV0RWwuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWwpO1xuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b24odGhpcy5faW5wdXRFbHMsIHRoaXMuX3N1Ym1pdEJ1dHRvbik7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XG4gICAgdGhpcy5fZm9ybUVsLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGUpID0+IHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICB9KTtcblxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgRm9ybVZhbGlkYXRvcjtcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwe1xuICAgIGNvbnN0cnVjdG9yKHtwb3B1cFNlbGVjdG9yfSl7XG4gICAgICAgIHRoaXMuX3BvcHVwRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XG4gICAgICAgIHRoaXMuX2hhbmRsZUVzY0Nsb3NlID0gdGhpcy5faGFuZGxlRXNjQ2xvc2UuYmluZCh0aGlzKTtcbiAgfVxuXG4gIG9wZW4oKSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJtb2RhbF9vcGVuZWRcIik7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICB9XG5cbiAgY2xvc2UoKSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJtb2RhbF9vcGVuZWRcIik7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICB9XG5cbiAgX2hhbmRsZUVzY0Nsb3NlKGUpIHtcbiAgICBpZiAoZS5rZXkgPT09IFwiRXNjYXBlXCIpIHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jbG9zZVwiKVxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgIH0pO1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIChldnQpID0+IHtcbiAgICAgIGlmIChcbiAgICAgICAgZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJtb2RhbFwiKSB8fFxuICAgICAgICBldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcIm1vZGFsX29wZW5lZFwiKVxuICAgICAgKSB7XG4gICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufVxuXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcbiAgICBjb25zdHJ1Y3Rvcih7cG9wdXBTZWxlY3RvciwgaGFuZGxlRm9ybVN1Ym1pdH0pIHtcbiAgICAgICAgc3VwZXIoeyBwb3B1cFNlbGVjdG9yIH0pO1xuICAgICAgICB0aGlzLl9wb3B1cEZvcm0gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcbiAgICAgICAgdGhpcy5faW5wdXRMaXN0ID0gdGhpcy5fcG9wdXBGb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoXCIubW9kYWxfX2lucHV0XCIpO1xuICAgICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcbiAgICAgICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2J1dHRvblwiKTtcblxuXG4gICAgfVxuXG4gICAgX2dldElucHV0VmFsdWVzKCkge1xuICAgICAgICBjb25zdCBpbnB1dFZhbHVlcyA9IHt9O1xuICAgICAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+IHtcbiAgICAgICAgICBpbnB1dFZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGlucHV0VmFsdWVzO1xuICAgICAgfVxuXG5cbiAgICAgICByZXNldEZvcm0oKXtcbiAgICAgICAgdGhpcy5fcG9wdXBGb3JtLnJlc2V0KCk7XG4gICAgICB9XG4gICAgXG4gICAgICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICAgICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICAgICAgdGhpcy5fcG9wdXBGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGUpID0+IHtcbiAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcblxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgXG4gIH1cbiIsImV4cG9ydCBjb25zdCBpbml0aWFsQ2FyZHMgPSBbXG4gICAge1xuICAgICAgbmFtZTogXCJZb3NlbWl0ZSBWYWxsZXlcIixcbiAgICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC95b3NlbWl0ZS5qcGdcIixcbiAgICB9LFxuICAgIHtcbiAgICAgIG5hbWU6IFwiTGFrZSBMb3Vpc2VcIixcbiAgICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYWtlLWxvdWlzZS5qcGdcIixcbiAgICB9LFxuICAgIHtcbiAgICAgIG5hbWU6IFwiQmFsZCBNb3VudGFpbnNcIixcbiAgICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9iYWxkLW1vdW50YWlucy5qcGdcIixcbiAgICB9LFxuICAgIHtcbiAgICAgIG5hbWU6IFwiTGF0ZW1hclwiLFxuICAgICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xhdGVtYXIuanBnXCIsXG4gICAgfSxcbiAgICB7XG4gICAgICBuYW1lOiBcIlZhbm9pc2UgTmF0aW9uYWwgUGFya1wiLFxuICAgICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L3Zhbm9pc2UuanBnXCIsXG4gICAgfSxcbiAgICB7XG4gICAgICBuYW1lOiBcIkxhZ28gZGkgQnJhaWVzXCIsXG4gICAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGFnby5qcGdcIixcbiAgICB9LFxuICBdO1xuXG4gZXhwb3J0IGNvbnN0IHZhbGlkYXRpb25TZXR0aW5ncyA9IHtcbiAgICBpbnB1dFNlbGVjdG9yOiBcIi5tb2RhbF9faW5wdXRcIixcbiAgICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIubW9kYWxfX2J1dHRvblwiLFxuICAgIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwibW9kYWxfX2J1dHRvbl9kaXNhYmxlZFwiLFxuICAgIGlucHV0RXJyb3JDbGFzczogXCJtb2RhbF9faW5wdXRfdHlwZV9lcnJvclwiLFxuICAgIGVycm9yQ2xhc3M6IFwibW9kYWxfX2Vycm9yX3Zpc2libGVcIixcbiAgfTtcblxuZXhwb3J0IGNvbnN0IGFkZE5ld0NhcmRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2FkZC1idXR0b25cIik7XG5leHBvcnQgY29uc3QgbmFtZUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNuYW1lLWlucHV0XCIpO1xuZXhwb3J0IGNvbnN0IGRlc2NyaXB0aW9uSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2Rlc2NyaXB0aW9uLWlucHV0XCIpOyIsImltcG9ydCBDYXJkIGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjtcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcbmltcG9ydCBcIi4uL3BhZ2UvaW5kZXguY3NzXCI7XG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xuaW1wb3J0IHtcbiAgaW5pdGlhbENhcmRzLFxuICB2YWxpZGF0aW9uU2V0dGluZ3MsXG4gIGFkZE5ld0NhcmRCdXR0b24sXG4gIG5hbWVJbnB1dCxcbiAgZGVzY3JpcHRpb25JbnB1dCxcbn0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xuXG5jb25zdCBlZGl0Rm9ybUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2VkaXQtcHJvZmlsZS1mb3JtXCIpO1xuY29uc3QgYWRkRm9ybUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2FkZC1jYXJkLWZvcm1cIik7XG5jb25zdCBwcm9maWxlRWRpdEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1lZGl0LWJ1dHRvblwiKTtcblxuLy8gUG9wdXBzXG5cbmNvbnN0IGltYWdlUG9wdXAgPSBuZXcgUG9wdXBXaXRoSW1hZ2Uoe1xuICBwb3B1cFNlbGVjdG9yOiBcIiNwcmV2aWV3LW1vZGFsXCIsXG59KTtcblxuXG5jb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbyh7XG4gIG5hbWVTZWxlY3RvcjogXCIjcHJvZmlsZS10aXRsZVwiLFxuICBqb2JTZWxlY3RvcjogXCIjcHJvZmlsZS1kZXNjcmlwdGlvblwiLFxufSk7XG5cbmNvbnN0IGVkaXRQcm9maWxlUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybSh7XG4gIHBvcHVwU2VsZWN0b3I6IFwiI2VkaXQtbW9kYWxcIixcbiAgaGFuZGxlRm9ybVN1Ym1pdDogKGRhdGEpID0+IHtcbiAgICB1c2VySW5mby5zZXRVc2VySW5mbyh7bmFtZTogZGF0YS5uYW1lICwgZGVzY3JpcHRpb246IGRhdGEuZGVzY3JpcHRpb259KTtcbiAgICBlZGl0UHJvZmlsZVBvcHVwLmNsb3NlKCk7XG4gICAgZWRpdFByb2ZpbGVQb3B1cC5yZXNldEZvcm0oKTtcbiAgICBlZGl0Rm9ybVZhbGlkYXRvci5kaXNhYmxlU3VibWl0QnV0dG9uKCk7XG4gIH0sXG59KTtcblxuXG5jb25zdCBhZGRDYXJkUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybSh7XG4gIHBvcHVwU2VsZWN0b3I6IFwiI2FkZC1jYXJkLW1vZGFsXCIsXG4gIGhhbmRsZUZvcm1TdWJtaXQ6ICh7IG5hbWUsIHVybCB9KSA9PiB7XG4gICAgY29uc3QgY2FyZEVsZW1lbnQgPSBjcmVhdGVDYXJkKHsgbmFtZSwgbGluazogdXJsIH0pO1xuICAgIGNhcmRMaXN0LmFkZEl0ZW0oY2FyZEVsZW1lbnQpO1xuICAgIGFkZENhcmRQb3B1cC5jbG9zZSgpO1xuICAgIGFkZENhcmRQb3B1cC5yZXNldEZvcm0oKTtcbiAgICBhZGRGb3JtVmFsaWRhdG9yLmRpc2FibGVTdWJtaXRCdXR0b24oKTtcbiAgfSxcbn0pO1xuXG4vLyBDYXJkIFJlbmRlcmluZ1xuXG5jb25zdCBjYXJkTGlzdCA9IG5ldyBTZWN0aW9uKFxuICB7XG4gICAgaXRlbXM6IGluaXRpYWxDYXJkcyxcbiAgICByZW5kZXJlcjogKGNhcmREYXRhKSA9PiB7XG4gICAgICBjb25zdCBjYXJkRWxlbWVudCA9IGNyZWF0ZUNhcmQoY2FyZERhdGEpO1xuICAgICAgY2FyZExpc3QuYWRkSXRlbShjYXJkRWxlbWVudCk7XG4gICAgfSxcbiAgfSxcbiAgXCIuY2FyZHNfX2xpc3RcIlxuKTtcblxuLy8gQ2FyZCBjcmVhdGUgZnVuY3Rpb25cblxuZnVuY3Rpb24gY3JlYXRlQ2FyZChjYXJkRGF0YSkge1xuICBjb25zdCBjYXJkID0gbmV3IENhcmQoY2FyZERhdGEsIFwiI2NhcmQtdGVtcGxhdGVcIiwgKGRhdGEpID0+IHtcbiAgICBpbWFnZVBvcHVwLm9wZW4oZGF0YSk7XG4gIH0pO1xuICByZXR1cm4gY2FyZC5nZXRWaWV3KCk7XG59XG5cbi8vXG5cbi8vIEV2ZW50IExpc3RlbmVyc1xuXG5hZGROZXdDYXJkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiBhZGRDYXJkUG9wdXAub3BlbigpKTtcbmVkaXRQcm9maWxlUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbmFkZENhcmRQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xuaW1hZ2VQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xuXG5wcm9maWxlRWRpdEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBjb25zdCBjdXJyZW50VXNlckluZm8gPSB1c2VySW5mby5nZXRVc2VySW5mbygpO1xuICBuYW1lSW5wdXQudmFsdWUgPSBjdXJyZW50VXNlckluZm8ubmFtZTtcbiAgZGVzY3JpcHRpb25JbnB1dC52YWx1ZSA9IGN1cnJlbnRVc2VySW5mby5kZXNjcmlwdGlvbjtcbiAgZWRpdFByb2ZpbGVQb3B1cC5vcGVuKCk7XG59KTtcblxuLy8gVmFsaWRhdGlvbiAvL1xuXG5jb25zdCBlZGl0Rm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKFxuICB2YWxpZGF0aW9uU2V0dGluZ3MsXG4gIGVkaXRGb3JtRWxlbWVudFxuKTtcblxuY29uc3QgYWRkRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKHZhbGlkYXRpb25TZXR0aW5ncywgYWRkRm9ybUVsZW1lbnQpO1xuXG5lZGl0Rm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG5hZGRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcblxuY2FyZExpc3QucmVuZGVySXRlbXMoKTsiLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHtwb3B1cFNlbGVjdG9yfSkge1xuICAgIHN1cGVyKHtwb3B1cFNlbGVjdG9yfSk7XG4gICAgdGhpcy5faW1hZ2UgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9faW1hZ2VcIik7XG4gICAgdGhpcy5fY2FwdGlvbiA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jYXB0aW9uXCIpO1xuICB9XG5cbiAgb3Blbih7IG5hbWUsIGxpbmsgfSkge1xuICAgIHRoaXMuX2ltYWdlLnNyYyA9IGxpbms7XG4gICAgdGhpcy5faW1hZ2UuYWx0ID0gbmFtZTtcbiAgICB0aGlzLl9jYXB0aW9uLnRleHRDb250ZW50ID0gbmFtZTtcbiAgICBzdXBlci5vcGVuKCk7XG4gIH1cbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XG4gICAgY29uc3RydWN0b3IoeyBuYW1lU2VsZWN0b3IsIGpvYlNlbGVjdG9yIH0pIHtcbiAgICAgIHRoaXMuX25hbWVFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihuYW1lU2VsZWN0b3IpO1xuICAgICAgdGhpcy5fam9iRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioam9iU2VsZWN0b3IpO1xuICAgIH1cbiAgXG4gICAgZ2V0VXNlckluZm8oKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBuYW1lOiB0aGlzLl9uYW1lRWxlbWVudC50ZXh0Q29udGVudCxcbiAgICAgICAgZGVzY3JpcHRpb246IHRoaXMuX2pvYkVsZW1lbnQudGV4dENvbnRlbnQsXG4gICAgICB9O1xuICAgIH1cbiAgXG4gICAgc2V0VXNlckluZm8oZGF0YSkge1xuICAgICAgdGhpcy5fbmFtZUVsZW1lbnQudGV4dENvbnRlbnQgPSBkYXRhLm5hbWU7XG4gICAgICB0aGlzLl9qb2JFbGVtZW50LnRleHRDb250ZW50ID0gZGF0YS5kZXNjcmlwdGlvbjtcbiAgICB9XG4gIH0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcbiAgICBjb25zdHJ1Y3Rvcih7IGl0ZW1zLCByZW5kZXJlciB9LCBjb250YWluZXJTZWxlY3Rvcikge1xuICAgICAgdGhpcy5faXRlbXMgPSBpdGVtcztcbiAgICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XG4gICAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKTtcbiAgICB9XG4gIFxuICAgIHJlbmRlckl0ZW1zKCkge1xuICAgICAgdGhpcy5faXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgICAgICB0aGlzLl9yZW5kZXJlcihpdGVtKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgXG4gICAgYWRkSXRlbShlbGVtZW50KSB7XG4gICAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChlbGVtZW50KTtcbiAgICB9XG4gIH0iXSwibmFtZXMiOlsiQ2FyZCIsImNvbnN0cnVjdG9yIiwiY2FyZERhdGEiLCJjYXJkVGVtcGxhdGUiLCJoYW5kbGVJbWFnZVByZXZpZXdDbGljayIsInRoaXMiLCJfbmFtZSIsIm5hbWUiLCJfbGluayIsImxpbmsiLCJfY2FyZFRlbXBsYXRlIiwiX2hhbmRsZUltYWdlUHJldmlld0NsaWNrIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiX2NhcmRJbWFnZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJfZGVsZXRlQnV0dG9uIiwiX2hhbmRsZURlbGV0ZUNhcmQiLCJfbGlrZUJ1dHRvbiIsIl9oYW5kbGVMaWtlQnV0dG9uIiwiX2NhcmRFbGVtZW50IiwicmVtb3ZlIiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwiZ2V0VGVtcGxhdGUiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiZ2V0VmlldyIsIl9jYXJkVGl0bGUiLCJzcmMiLCJhbHQiLCJ0ZXh0Q29udGVudCIsInNldHRpbmdzIiwiZm9ybUVsIiwiX2Zvcm1TZWxlY3RvciIsImZvcm1TZWxlY3RvciIsIl9pbnB1dFNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsIl9zdWJtaXRCdXR0b25TZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiX2luYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiX2lucHV0RXJyb3JDbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsIl9lcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsIl9mb3JtRWwiLCJfc2hvd0lucHV0RXJyb3IiLCJpbnB1dEVsIiwiZXJyb3JNc2ciLCJpZCIsImFkZCIsInZhbGlkYXRpb25NZXNzYWdlIiwiX2hpZGVJbnB1dEVycm9yIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsInZhbGlkaXR5IiwidmFsaWQiLCJfdG9nZ2xlQnV0dG9uIiwiaW52YWxpZElucHV0IiwiX2lucHV0RWxzIiwiZm9yRWFjaCIsImRpc2FibGVTdWJtaXRCdXR0b24iLCJfc3VibWl0QnV0dG9uIiwiZGlzYWJsZWQiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZW5hYmxlVmFsaWRhdGlvbiIsImUiLCJwcmV2ZW50RGVmYXVsdCIsIlBvcHVwIiwiX3JlZiIsInBvcHVwU2VsZWN0b3IiLCJfcG9wdXBFbGVtZW50IiwiX2hhbmRsZUVzY0Nsb3NlIiwiYmluZCIsIm9wZW4iLCJjbG9zZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJrZXkiLCJzZXRFdmVudExpc3RlbmVycyIsImV2dCIsInRhcmdldCIsImNvbnRhaW5zIiwiUG9wdXBXaXRoRm9ybSIsImhhbmRsZUZvcm1TdWJtaXQiLCJzdXBlciIsIl9wb3B1cEZvcm0iLCJfaW5wdXRMaXN0IiwiX2hhbmRsZUZvcm1TdWJtaXQiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJpbnB1dFZhbHVlcyIsImlucHV0IiwidmFsdWUiLCJyZXNldEZvcm0iLCJyZXNldCIsInZhbGlkYXRpb25TZXR0aW5ncyIsImFkZE5ld0NhcmRCdXR0b24iLCJuYW1lSW5wdXQiLCJkZXNjcmlwdGlvbklucHV0IiwiZWRpdEZvcm1FbGVtZW50IiwiYWRkRm9ybUVsZW1lbnQiLCJwcm9maWxlRWRpdEJ0biIsImltYWdlUG9wdXAiLCJfaW1hZ2UiLCJfY2FwdGlvbiIsIl9yZWYyIiwidXNlckluZm8iLCJuYW1lU2VsZWN0b3IiLCJqb2JTZWxlY3RvciIsIl9uYW1lRWxlbWVudCIsIl9qb2JFbGVtZW50IiwiZ2V0VXNlckluZm8iLCJkZXNjcmlwdGlvbiIsInNldFVzZXJJbmZvIiwiZGF0YSIsImVkaXRQcm9maWxlUG9wdXAiLCJlZGl0Rm9ybVZhbGlkYXRvciIsImFkZENhcmRQb3B1cCIsInVybCIsImNhcmRFbGVtZW50IiwiY3JlYXRlQ2FyZCIsImNhcmRMaXN0IiwiYWRkSXRlbSIsImFkZEZvcm1WYWxpZGF0b3IiLCJjb250YWluZXJTZWxlY3RvciIsIml0ZW1zIiwicmVuZGVyZXIiLCJfaXRlbXMiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwicmVuZGVySXRlbXMiLCJpdGVtIiwiZWxlbWVudCIsInByZXBlbmQiLCJjdXJyZW50VXNlckluZm8iLCJGb3JtVmFsaWRhdG9yIl0sInNvdXJjZVJvb3QiOiIifQ==